{"version":3,"sources":["webpack:///webpack/bootstrap c87a4ca92eae8d1cd17f?687c","webpack:///./server/TerseJsonschema_test.ts","webpack:///external \"source-map-support\"?b5ae","webpack:///external \"chai\"?e564","webpack:///./server/TerseJsonschema.ts?add4","webpack:///external \"lodash\"?0c8b"],"names":["parseNode","parseOf","parseString","parseRequired","parseObject","parseArray","parse"],"mappings":"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","file":"server\\TerseJsonschema_test.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap c87a4ca92eae8d1cd17f\n **/","/// <reference path=\"../typings/references.d.ts\" />\r\nrequire('source-map-support').install();\r\nimport TerseJsonschema = require('./TerseJsonschema');\r\nimport chai = require('chai');\r\n\r\nvar expect = chai.expect;\r\n\r\n\r\ndescribe('Simple 1 level schema', function(): void {\r\n\r\n    var source: any = {\r\n        username: 'string',\r\n        age: 'integer',\r\n        verified: 'boolean',\r\n        gender: ['F', 'M'],\r\n        weight: 'number',\r\n        email: 'email',\r\n        avatarUrl: 'uri',\r\n        createdAt: 'date-time',\r\n        empty: 'null'\r\n    };\r\n\r\n    var obj = <any> TerseJsonschema.parse(source);\r\n\r\n    it('should be a object', function(): void {\r\n        expect(obj.type).to.equal('object');\r\n        expect(obj.properties).to.be.instanceOf(Object);\r\n    });\r\n\r\n    it('object should have correct string field', function(): void {\r\n        expect(obj.properties.username.type).to.equal('string');\r\n    });\r\n\r\n    it('object should have correct integer field', function(): void {\r\n        expect(obj.properties.age.type).to.equal('integer');\r\n    });\r\n    it('object should have correct number field', function(): void {\r\n        expect(obj.properties.weight.type).to.equal('number');\r\n    });\r\n    it('object should have correct boolean field', function(): void {\r\n        expect(obj.properties.verified.type).to.equal('boolean');\r\n    });\r\n    it('object should have correct enum field', function(): void {\r\n        var field = obj.properties.gender;\r\n        expect(field.enum).to.have.length(2);\r\n        expect(field.enum).to.include('F');\r\n        expect(field.enum).to.include('M');\r\n    });\r\n    it('object should have correct date field', function(): void {\r\n        var field = obj.properties.createdAt;\r\n        expect(field.type).to.equal('string');\r\n        expect(field.format).to.equal('date-time');\r\n    });\r\n    it('object should have correct email field', function(): void {\r\n        var field: any;\r\n        field = obj.properties.email;\r\n        expect(field.type).to.equal('string');\r\n        expect(field.format).to.equal('email');\r\n    });\r\n    it('object should have correct uri field', function(): void {\r\n        var field: any;\r\n        field = obj.properties.avatarUrl;\r\n        expect(field.type).to.equal('string');\r\n        expect(field.format).to.equal('uri');\r\n    });\r\n    it('object should have correct null field', function(): void {\r\n        var field: any;\r\n        field = obj.properties.empty;\r\n        expect(field.type).to.equal('null');\r\n    });\r\n    it('object should not allow additional properties', function(): void {\r\n        expect(obj.additionalProperties).to.equal(false);\r\n    });\r\n});\r\n\r\n\r\ndescribe('Schema with array', function(): void {\r\n    describe('as root schema', function(): void {\r\n        describe('and item is simple object', function(): void {\r\n\r\n            var source: any = [\r\n                {\r\n                    w: 'integer',\r\n                    h: 'integer'\r\n                }\r\n            ];\r\n\r\n            var obj: any = TerseJsonschema.parse(source);\r\n\r\n\r\n            it('root object should be array', function(): void {\r\n                expect(obj.type).to.equal('array');\r\n            });\r\n\r\n            it('should have correct object in array items', function(): void {\r\n                var item: any;\r\n                item = obj.items;\r\n                expect(item.type).to.equal('object');\r\n                expect(item.properties.w.type).to.equal('integer');\r\n                expect(item.properties.h.type).to.equal('integer');\r\n            });\r\n        });\r\n    });\r\n\r\n    describe('as array field', function(): void {\r\n        describe('contains object', function(): void {\r\n\r\n            var source: any = {\r\n                photos: [\r\n                    {\r\n                        w: 'integer',\r\n                        h: 'integer'\r\n                    }\r\n                ]\r\n            };\r\n\r\n            var obj: any = TerseJsonschema.parse(source);\r\n\r\n\r\n            it('should have correct array field', function(): void {\r\n                var field: any;\r\n                field = obj.properties.photos;\r\n                expect(field.type).to.equal('array');\r\n            });\r\n\r\n            it('should have correct object in array items', function(): void {\r\n                var item: any;\r\n                item = obj.properties.photos.items;\r\n                expect(item.type).to.equal('object');\r\n                expect(item.properties.w.type).to.equal('integer');\r\n                expect(item.properties.h.type).to.equal('integer');\r\n            });\r\n        });\r\n\r\n\r\n        describe('contains simple types', function(): void {\r\n\r\n            var source: any = {\r\n                foos: ['string']\r\n            };\r\n\r\n            var obj: any = TerseJsonschema.parse(source);\r\n\r\n\r\n            it('should have correct array field', function(): void {\r\n                var field: any;\r\n                field = obj.properties.foos;\r\n                expect(field.type).to.equal('array');\r\n            });\r\n\r\n            it('should have correct object in array items', function(): void {\r\n                var item: any;\r\n                item = obj.properties.foos.items;\r\n                expect(item.type).to.equal('string');\r\n            });\r\n        });\r\n    });\r\n});\r\n\r\n\r\ndescribe('Schema with embedded objects', function(): void {\r\n    var source: any = {\r\n        user: {\r\n            username: 'string'\r\n        },\r\n        config: {\r\n            user: {\r\n                verified: 'boolean'\r\n            }\r\n        }\r\n    };\r\n\r\n    var obj: any = TerseJsonschema.parse(source);\r\n\r\n    it('should be a object', function(): void {\r\n        expect(obj.type).to.equal('object');\r\n        expect(obj.properties).to.be.instanceOf(Object);\r\n    });\r\n\r\n    it('object should have level-1 embedded object', function(): void {\r\n        var field: any, subfield: any;\r\n        field = obj.properties.user;\r\n        expect(field.type).to.equal('object');\r\n        subfield = field.properties.username;\r\n        expect(subfield.type).to.equal('string');\r\n    });\r\n\r\n    it('object should have level-2 embedded object', function(): void {\r\n        var field: any, subfield: any;\r\n        field = obj.properties.config.properties.user;\r\n        expect(field.type).to.equal('object');\r\n        subfield = field.properties.verified;\r\n        expect(subfield.type).to.equal('boolean');\r\n    });\r\n});\r\n\r\n\r\ndescribe('Schema with $required', function(): void {\r\n\r\n    describe('implicit required', function(): void {\r\n        var source: any = {\r\n            username: 'string',\r\n            age: 'integer',\r\n            verified: 'boolean'\r\n        };\r\n\r\n        var obj: any = TerseJsonschema.parse(source);\r\n\r\n\r\n        it('all fields should be required', function(): void {\r\n            expect(obj.required).to.have.length(3);\r\n            expect(obj.required).to.include('username');\r\n            expect(obj.required).to.include('age');\r\n            expect(obj.required).to.include('verified');\r\n        });\r\n    });\r\n\r\n\r\n    describe('and required fields explicitly', function(): void {\r\n        var source: any = {\r\n            username: 'string',\r\n            age: 'integer',\r\n            verified: 'boolean',\r\n            $required: 'age username'\r\n        };\r\n\r\n        var obj: any = TerseJsonschema.parse(source);\r\n\r\n\r\n        it('should only required explicit field', function(): void {\r\n            expect(obj.required).to.have.length(2);\r\n            expect(obj.required).to.include('age');\r\n            expect(obj.required).to.include('username');\r\n        });\r\n    });\r\n\r\n    describe('and requried nothing', function(): void {\r\n\r\n        var source: any = {\r\n            username: 'string',\r\n            age: 'integer',\r\n            verified: 'boolean',\r\n            $required: ''\r\n        };\r\n\r\n\r\n        var obj: any = TerseJsonschema.parse(source);\r\n\r\n        it('should requires nothing', function(): void {\r\n            expect(obj.required).to.have.length(0);\r\n        });\r\n    });\r\n});\r\n\r\n\r\ndescribe('Schema with $raw', function(): void {\r\n    describe('as simple field', function(): void {\r\n        var source: any = {\r\n            username: {\r\n                $raw: {\r\n                    type: 'string',\r\n                    minLength: 1,\r\n                    maxLength: 10\r\n                }\r\n            }\r\n        };\r\n        var obj: any = TerseJsonschema.parse(source);\r\n        it('should be a object', function(): void {\r\n            expect(obj.type).to.equal('object');\r\n            expect(obj.properties).to.be.instanceOf(Object);\r\n        });\r\n        it('should expand $raw field', function(): void {\r\n            expect(obj.properties.username).to.equal(source.username.$raw);\r\n        });\r\n    });\r\n});\r\n\r\ndescribe('With invalid schema', function(): void {\r\n    describe('contains $required', function(): void {\r\n        describe('does not exist', function(): void {\r\n            var source: any = {\r\n                foo: 'string',\r\n                $required: 'ss'\r\n            };\r\n            it('should failed with error message', function(): void {\r\n                expect(() => TerseJsonschema.parse(source)).to.throw(Error, 'Required non-exist field: ss');\r\n            });\r\n        });\r\n        describe('with invalid format', function(): void {\r\n            var source: any = {\r\n                foo: 'string',\r\n                $required: ['ss']\r\n            };\r\n            it('should failed with error message', function(): void {\r\n                expect(() => TerseJsonschema.parse(source)).to.throw(Error, '$required should be string');\r\n            });\r\n        });\r\n    });\r\n    describe('contains nonexist type', function(): void {\r\n\r\n        var source: any = {\r\n            foo: 'bar'\r\n        };\r\n\r\n        it('should failed with error message', function(): void {\r\n            expect(() => TerseJsonschema.parse(source)).to.throw(Error, 'Type is not defined: bar');\r\n        });\r\n    });\r\n});\r\n\r\n\r\ndescribe('Schema with custom type', function(): void {\r\n    var source: any = {\r\n        date: 'Date'\r\n    };\r\n\r\n    var glob: any = {\r\n        Date: {\r\n            $raw: {\r\n                type: 'string',\r\n                pattern: '^\\\\d{4}-\\\\d{2}-\\\\d{2}$'\r\n            }\r\n        }\r\n    };\r\n\r\n    var obj: any = TerseJsonschema.parse(source, glob);\r\n\r\n    it('should be a object', function(): void {\r\n        expect(obj.type).to.equal('object');\r\n        expect(obj.properties).to.be.instanceOf(Object);\r\n    });\r\n    it('should replace the custom type', function(): void {\r\n        expect(obj.properties.date).to.equal(glob.Date.$raw);\r\n    });\r\n});\r\n\r\n\r\ndescribe('Schema with oneOf', function(): void {\r\n    var source: any = {\r\n        date: {\r\n            $oneOf: [\r\n                'integer',\r\n                'null'\r\n            ]\r\n        }\r\n    };\r\n\r\n\r\n    var obj: any = TerseJsonschema.parse(source);\r\n\r\n    it('should be correct', function(): void {\r\n        expect(obj.type).to.equal('object');\r\n        expect(obj.properties).to.be.instanceOf(Object);\r\n        expect(obj.properties.date.oneOf).to.be.instanceOf(Array);\r\n        expect(obj.properties.date.oneOf[0]).to.be.instanceOf(Object);\r\n    });\r\n\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./server/TerseJsonschema_test.ts\n **/","module.exports = require(\"source-map-support\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"source-map-support\"\n ** module id = 1\n ** module chunks = 0 1\n **/","module.exports = require(\"chai\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"chai\"\n ** module id = 2\n ** module chunks = 0 1\n **/","/// <reference path=\"../typings/references.d.ts\" />\r\n\r\nimport _ = require('lodash');\r\n\r\ninterface ObjectNode {\r\n    [idx: string]: any;\r\n    $raw?: JsonschemaType;\r\n    $oneOf?: Node[];\r\n    $allOf?: Node[];\r\n    $anyOf?: Node[];\r\n    $required?: string;\r\n}\r\n\r\n\r\ntype Type = string;\r\n\r\nexport type Node = ObjectNode | ObjectNode[] | string[] | Type;\r\n\r\ninterface TypeDefs {\r\n    [idx: string]: Node;\r\n}\r\n\r\nexport interface JsonschemaType {\r\n    type: string;\r\n    description?: string;\r\n    properties?: {[idx: string]: JsonschemaNode};\r\n    items?: JsonschemaNode;\r\n    additionalProperties?: boolean;\r\n    required?: string[];\r\n}\r\n\r\ninterface JsonschemaEnum {\r\n    enum: string[];\r\n}\r\n\r\ninterface AllAnyOneOfJsonschemaType {\r\n    [idx: string]: JsonschemaType[];\r\n}\r\n\r\ntype JsonschemaNode = JsonschemaType | AllAnyOneOfJsonschemaType | JsonschemaEnum;\r\n\r\nfunction parseNode(source: Node, defs?: TypeDefs): JsonschemaNode {\r\n    if (_.isArray(source)) {\r\n        return parseArray(<ObjectNode[] | string[]> source, defs);\r\n    }\r\n\r\n    if (_.isObject(source)) {\r\n        var objectSource = <ObjectNode> source;\r\n        if (objectSource.$raw) {\r\n            return objectSource.$raw;\r\n        }\r\n\r\n        if (objectSource.$oneOf) {\r\n            return parseOf('oneOf', objectSource, defs);\r\n        }\r\n\r\n        if (objectSource.$allOf) {\r\n            return parseOf('allOf', objectSource, defs);\r\n        }\r\n        if (objectSource.$anyOf) {\r\n            return parseOf('anyOf', objectSource, defs);\r\n        }\r\n\r\n        return parseObject(objectSource, defs);\r\n    }\r\n\r\n    if (_.isString(source)) {\r\n        return parseString(<Type> source, defs);\r\n    }\r\n\r\n    throw new Error(\"Syntax error, does not support \" + typeof source + \" field\");\r\n}\r\n\r\nfunction parseOf(type: string, source: ObjectNode, defs: TypeDefs): AllAnyOneOfJsonschemaType {\r\n    if (!_.isArray(source['$' + type])) {\r\n        throw new Error(type + \" must be array\");\r\n    }\r\n    var res: AllAnyOneOfJsonschemaType = {};\r\n    res[type] = source['$' + type].map(function(e: Node) {\r\n        return parseNode(e, defs);\r\n    });\r\n    return res;\r\n}\r\n\r\nfunction parseString(source:string, defs: TypeDefs): JsonschemaNode {\r\n    switch (source) {\r\n        case \"string\":\r\n        case \"integer\":\r\n        case \"number\":\r\n        case \"boolean\":\r\n        case \"null\":\r\n            return {type: source};\r\n\r\n        case \"date-time\":\r\n        case \"email\":\r\n        case \"uri\":\r\n            return {type: 'string', format: source};\r\n\r\n        default:\r\n            if (!defs || !defs[source]) {\r\n                throw new Error(\"Type is not defined: \" + source);\r\n            }\r\n            return parseNode(defs[source]);\r\n\r\n    }\r\n}\r\n\r\nfunction parseRequired(source: ObjectNode) {\r\n    var sourceItems = Object.keys(source).filter(function(f) {\r\n        return f !== '$required';\r\n    });\r\n    // if empty required, nothing is required\r\n    if (source.$required === '') {\r\n        return [];\r\n    }\r\n\r\n    // if no required, then everything is required\r\n    if (!source.$required) {\r\n        return sourceItems;\r\n    }\r\n\r\n    if (!_.isString(source.$required)) {\r\n        throw new Error('$required should be string');\r\n    }\r\n\r\n    var required = source.$required.split(' ');\r\n\r\n    required.forEach(function(r) {\r\n        if (sourceItems.indexOf(r) === -1) {\r\n            throw new Error(\"Required non-exist field: \" + r);\r\n        }\r\n    });\r\n\r\n    return required;\r\n}\r\n\r\n\r\nfunction parseObject(source: ObjectNode , defs: TypeDefs): JsonschemaType {\r\n    var obj: JsonschemaType = {\r\n        type: 'object',\r\n        properties: {},\r\n        required: parseRequired(source),\r\n        additionalProperties: false\r\n    };\r\n\r\n    Object.keys(source).forEach(function(k) {\r\n        if (k !== '$required') {\r\n            obj.properties[k] = parseNode(source[k], defs);\r\n        }\r\n    });\r\n\r\n    return obj;\r\n}\r\n\r\nexport function parseArray(array: Node[] | string[], defs: TypeDefs): JsonschemaNode {\r\n    if (array.length === 0) {\r\n        throw new Error(\"array must be length > 0\");\r\n    }\r\n\r\n    if (array.length > 1) {\r\n        return <JsonschemaEnum> {enum: array};\r\n    }\r\n\r\n    return {\r\n        type: \"array\",\r\n        items: parseNode(array[0], defs)\r\n    };\r\n}\r\n\r\n\r\nexport function parse(source: Node, defs?: TypeDefs) {\r\n    if (_.isArray(source) || _.isObject(source)) {\r\n        return parseNode(source, defs);\r\n    }\r\n    throw new Error('source must be Array or Object');\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/TerseJsonschema.ts\n **/","module.exports = require(\"lodash\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"lodash\"\n ** module id = 8\n ** module chunks = 0 1\n **/"],"sourceRoot":""}